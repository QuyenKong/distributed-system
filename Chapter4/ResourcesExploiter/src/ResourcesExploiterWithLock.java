import java.util.concurrent.locks.ReentrantLock;
public class ResourcesExploiterWithLock extends ResourcesExploiter {
    private ReentrantLock lock;

    // Constructor
    public ResourcesExploiterWithLock(int n){
        super(n);             // gọi constructor cha
        lock = new ReentrantLock();  // khởi tạo lock
    }

    // Phương thức đồng bộ bằng Lock
    @Override
    public void exploit(){
        lock.lock();    // chiếm lock
        try {
            setRsc(getRsc() + 1);   // thao tác trên tài nguyên
        } finally {
            lock.unlock();  // NHẤT ĐỊNH phải unlock để tránh deadlock
        }
    }
}